.row
  .col-md-6.col-sm-8.col-md-offset-3.col-sm-offset-2
    = form_for([:staff, @location]) do |f|
      = render "application/form_errors", object: @location

      .form-group.label-floating
        = f.label :name, "Location Name", class: "control-label"
        = f.text_field :name, class: "form-control"
      %br
      .form-group.label-floating
        = f.label :programs, "Programs", class: "control-label"
        %table
          %thead
            %th Program
            %th Available
            %th Enable Tardy Alerts
          %tbody
            %tr
              %td
                = f.collection_check_boxes :program_ids, @programs, :id, :name, class: "form-control" do |cb|
                  = "#{cb.check_box} #{cb.text}"
                  %br
              %td
                - @programs.each do |program|
                  - prog_loc = f.object.program_locations.find_by(program_id: program.id)
                  = check_box_tag "availables[#{program.id}]", true, prog_loc.present? ? prog_loc.available : false
                  %br
              %td
                - @programs.each do |program|
                  - prog_loc = f.object.program_locations.find_by(program_id: program.id)
                  = check_box_tag "enable_alerts[#{program.id}]", true, prog_loc.present? ? prog_loc.enable_alerts : false
                  %br

      = link_to "Cancel", staff_locations_path, class: "btn"
      = f.submit class: "btn btn-info pull-right"
